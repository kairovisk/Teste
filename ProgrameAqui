#modificacoes 06/12/2016(20:13)
#criacao das funcoes save e savePrincipal

#NECESSARIO
#EM ALGUMAS FUNCOES TEM UM CODIGO ASSIM >> f = open('C:/Users/steferson/Desktop/AtividadesPython/save.txt','r')
#QUANDO ENCONTRAR ESSE "f.open" MUDE O DIRETORIO PQ FIQUEI COM PREGUICA DE MUDAR TODOS - TENTE USAR O CTRL + F, SEI LA

#OLHAR LINHAS 222, 223 E 224, CRIAR NOVAS FUNCOES PARA CADA UM
#MONSTROS PARA AS PROXIMAS FASES

def monstro_flores_inic_facil(repeat):

    monstro_selec=0
    nome=''
    #nos mnstros [NIVEL, VIDA, ATAQUE, DEFESA, EXP, GOLD]
    cao_selvagem=[ 2, 15, 6, 2, 10, 20]#5
    serpente=[1, 10, 5, 0, 5, 15]#4
    lobo_filhote=[ 2, 20, 6, 3, 15, 20]#5
    lobo=[ 3, 20, 8, 4, 20, 25]#3
    aranha=[ 2, 15, 4, 1, 8, 20]#5
    macaco_ancestral=[ 5, 35, 12, 6, 30, 40]#2
    if repeat==5:
        nomemonstro='Rei Macaco'
        return (nomemonstro, macaco_ancestral)
    monstro_selec=random.randint(1,26)
    if monstro_selec>=1 and monstro_selec<6:
        nomemonstro='Cao Selvagem'
        return (nomemonstro, cao_selvagem)
    elif monstro_selec>=6 and monstro_selec<10:
        nomemonstro='Serpente'
        return (nomemonstro ,serpente)
    elif monstro_selec>=10 and monstro_selec<16:
        nomemonstro='Filhote de Lobo'
        return (nomemonstro ,lobo_filhote)
    elif monstro_selec>=16 and monstro_selec<20:
        nomemonstro='Lobo'
        return (nomemonstro, lobo)
    else:
        nomemonstro='Aranha'
        return (nomemonstro, aranha)
def floresta_iniciante():
    import random
    global hp,mana,ataque,defesa,lv,ptlv,exp,gold,character1
    op_continuar=1
    op_iniciar=1
    atk=0
    monstro=[]
    goldwin=0
    defm=0
    nome_monstro=''
    repeat=0
    while op_continuar==1:
        repeat=repeat+1
        nome_monstro, monstro=monstro_flores_inic_facil(repeat)
        if repeat==5:
            print'Voce encontrou o terrivel ', nome_monstro,' ele contem itens bons'
        else:
            print ' Voce esta andando pela floresta e encontra um(a) ', nome_monstro, ' Nivel ', monstro[0]
            print ' O Combate vai comecar!'
            #nos monstros [NIVEL, VIDA, ATAQUE, DEFESA, EXP, GOLD]
        while monstro[1]>0:
            acao=input (' E o seu turno, O que ira fazer? \n 1 - Atacar fisicamente\n 2 - Atacar com Magia\n 3 - Se Curar\n')
            if acao==1:
                    #ataque=int(ataque)
                    #defm=int(monstro[4])
                atk=random.randint(monstro[3],ataque)
                monstro[1]=monstro[1]-atk
                if atk==ataque-monstro[3]:
                    print ' Critical Hit!!!'
                print 'Voce deu ',(atk),' de dano, agora', nome_monstro,' possui', monstro[1], ' de vida\n'
                if monstro[1]>0:
                    print ' E o turno de', nome_monstro
                        #atk=int(monstro[2])
                        #defesa=int(defesa)
                    atk=random.randint(defesa,monstro[2])
                    hp=hp-atk
                    print nome_monstro,' Ataca e voce perde', atk,' de vida\n'
                    if hp<=0:
                        print ' Voce morreu, retornando para o Templo\n'
                        curar()

                    print ' Voce possui ', hp, ' de vida'
        exp=exp+monstro[4]
        atk=monstro[5]
        goldwin=random.randint(1,atk)
        gold=gold+goldwin
        print ' Voce ganhou ', goldwin,' de GOLD por matar', nome_monstro
        print ' Voce possui ', hp, ' de vida'
        if exp>=50:
            print ' Voce passou de nivel e ganhou 3 Pontos de Caracteristica'
            ptlv=ptlv+3
            exp=0
        if repeat==5:
            repeat=0
        op_continuar=input(' Deseja continuar? \n 1 - SIM\n 2 - NAO      ')
    save()
    return 0
def combate():
    op_combate=0
    while op_combate !=6:
        print '\n\n 1 - Floresta do Iniciante\n 2 - Cabana Abandonada\n 3 - Cemiterio Amaldicoado'
        print ' 4 - Deserto Escaldante\n 5 - Cidade Perdida\n 6 - Cancelar\n '
        op_combate = input ('  Voce entrou no modo de combate, por favor selecione o local onde ira cacar\n')
        if op_combate==1:
            floresta_iniciante()
        elif op_combate==2:
            cabana_abandonada()
        elif op_combate==3:
            cemiterio_amaldi()
        elif op_combate==4:
            deserto_escald()
        elif op_combate==5:
            cidade_perdida()
        elif op_combate==6:
            return 0
        else:
            print 'Opcao Invalida'

def inventario():
    global vault,character1
    if len(vault)==0:
        print ' GOLD = ',gold
        print ' Inventario Vazio'
    else:
        print ' Este e o inventario de ', character1
        print ' GOLD = ',gold
        for i in range (len(vault)):
            print i+1, ' ', vault[i]
        op_item=input(' Deseja utilizar algum item? 1 = Sim       2 = Nao    ')
        while 0< op_item >3:
            if op_item==1:
                uso_item()
            else:
                menu()
def personagem():
    global hp,mana,ataque,defesa,lv,ptlv,exp,gold,character1,hpmax
    print ' Caracteristicas de ', character1
    print ' Nivel = ', lv
    print ' VIDA = ', hp
    print ' MANA = ', mana
    print ' Ataque = ', ataque
    print ' Defesa = ', defesa
    print ' Experiencia = ', exp
    print ' GOLD = ', gold
    print ' Experiencia necessaria para o proximo nivel = ', (50-exp)
    while ptlv > 0:
        print ' Voce tem pontos de nivel disponivel, por favor distribua-os'
        print '             1 - HP \n             2 - MANA \n             3 - Ataque \n             4 - Defesa \n             Pontos = ',ptlv
        op_pontos=input(' Onde deseja adicionar seus pontos?      ')
        if op_pontos==1:
            if ptlv>0:
                op_pontos2=input ('\n Quantos?    ')
                if op_pontos2>ptlv or op_pontos2<0:
                    print  ' Quantidade invalida'
                else:
                    hp=hp+op_pontos2*3
                    hpmax=hp
                    ptlv=ptlv-op_pontos2
                    print ' Adicionado com Sucesso '
        elif op_pontos==2:
            if ptlv>0:
                op_pontos2=input ('\n Quantos?')
                if op_pontos2>ptlv or op_pontos2<0:
                    print  ' Quantidade invalida'
                else:
                    mana=mana+op_pontos2*2
                    ptlv=ptlv-op_pontos2
                    print ' Adicionado com Sucesso '
        elif op_pontos==3:
            if ptlv>0:
                op_pontos2=input ('\n Quantos?')
                if op_pontos2>ptlv or op_pontos2<0:
                    print  ' Quantidade invalida'
                else:
                    ataque=ataque+op_pontos2
                    ptlv=ptlv-op_pontos2
                    print ' Adicionado com Sucesso\n\n\n '
        elif op_pontos==4:
            if ptlv>0:
                op_pontos2=input ('\n Quantos?')
                if op_pontos2>ptlv or op_pontos2<0:
                    print  ' Quantidade invalida\n'
                else:
                    defesa=defesa+op_pontos2
                    ptlv=ptlv-op_pontos2
                    print ' Adicionado com Sucesso \n \n '

def curar():
    global hp,mana,ataque,defesa,lv,ptlv,exp,gold,character1
    porc=0
    if hp <=0:
        print ' Sacerdote: Conseguimos te ressuscitar antes que sua alma fosse perdida para sempre'
        print ' Sacerdote: Iremos te curar'
        hp=hpmax
        print ' Sacerdote: Caput mortuum imperet tibi Dominus per Adam lotchavah!'
        print ' Sacerdote: Aquila errans, imperet tibi Dominus tetragrammaton per Angelum et leonem!'
        print ' Sacerdote: Michael, Gabriel, Raphael, Anael!'
        print ' Sacerdote: Pluat udor per spiritu Elohimm. Maneat Terra per Adam, Jatchivah.'
        print ' Sacerdote: Fiat Jadictum per ignem in virtude Michael'
        print ' \n\n Voce foi curado e esta com a vida em 100%'
        print ' Voce perdeu 25% do seu GOLD'
        porc = (25 / 100.0) * gold
        gold=gold-porc
        return cidade()
    op=0
    while op!=2:
        print ' Avloush Keevar Soldado, o que desejas?'
        op=input ( ' 1 - Se Curar(Necessita Gold)\n 2 - Voltar')
        if op==1:
            porc=(10/100)*gold
            print ' Para te curar foi necessario', porc,' do seu gold'
            hp=hpmax
        elif op==2:
            return 0
        else:
            print ' Opcao Incorreta'

def cidade():
    op=0
    print ' \n\n\n\n'
    print ' Ola nobre guerreiro, seja Bem Vindo a Cidade de Dawnstalker'
    while op!=7:
        print ' 1 - Inventario'
        print ' 2 - Treinador de Caracteriticas'
        print ' 3 - Treinador de Habilidades'#precisafazer
        print ' 4 - Vendedor de Armas'#precisafazer
        print ' 5 - Vendedor de Armaduras'#precisafazer
        print ' 6 - Ir ao Templo se Curar'
        print ' 7 - Voltar a Estrada'
        op=input(' Digite sua Opcao ')
        if op==1:
            inventario()
        elif op==2:
            personagem()
        elif op==3:
            treinadorhab()
        elif op==4:
            npcarmas(character1)
        elif op==5:
            npcarmaduras(character1)
        elif op==6:
            curar()
        elif op==7:
            return 0
        else:
            print ' Opcao invalida'


def savePrincipal ( ):
    ''' No arquivo cada linha representa um valor, nessa ordem
        1 - nome = character1
        2 - hp = 50
        3 - mana = 30
        4 - ataque = 10
        5 - defesa = 3
        6 - ptlv = 5
        7 - exp = 0
        8 - gold = 0
        9 - lv = 0 '''
    f = open('C:/Users/steferson/Desktop/AtividadesPython/save.txt','r')
    sav = f.readline ()
    f.close()
    if len (sav) == 0:
        print ' Dois anos atras'
        print '         Uma vila chamada Havic foi atacada por forcas misteriosas que surgiram do alem, houve sangue, caos,'
        print '         mortes, mas um bravo soldado foi capaz de lutar contra esses seres imortais e gananciosos, como o '
        print '         unico sobrevivente do seu clan, lhe foi imcubido o dever de lutar contra as trevas e assim ter a '
        print '         vingaca que almeja desde o dia que viu sua familia morrer em seus bracos'
        character1=raw_input (' Digite o nome do seu personagem :  ')
        print '         Esse guerreiro se chamava ',character1,' e assim comecou a sua jornada, atraves dos tempos ele '
        print '         encontrou pessoas que lhe auxiliaram no dominio da Artes Shungeki(Armas) e nas Artes'
        print '         Zaosheki(Feiticos).'
        print '         \nHoje...\n         ',character1,' Finalmente volta ao continente em sua investigacao, mas o mal estava'
        print '          dominando, agora ele deve vingar seu clan e trazer paz novamente onde um dia foi seu lar!!!'
        save()
    else:
        f = open('C:/Users/steferson/Desktop/AtividadesPython/save.txt','r')
        character1 = f.readline( )
        character1 = character1.replace('\n','')
        hp = int(f.readline())
        mana = int(f.readline())
        ataque = int(f.readline())
        defesa = int(f.readline())
        ptlv = int(f.readline())
        exp = int(f.readline())
        gold = int(f.readline())
        lv = int(f.readline())
        print character1, 'voltou para a estrada com os seguintes atributos \nhp =',hp, '\nataque =',ataque,'\ndefesa =',defesa
        print 'mana =',mana,'\nptlv =',ptlv,'\nexp =',exp,'\ngold =',gold,'\nlv =',lv,'\n'

def save ():
    global hp,mana,ataque,defesa,lv,ptlv,exp,gold,character1
    shp = str(hp)
    smana = str(mana)
    sataque = str(ataque)
    sdefesa = str(defesa)
    sptlv = str(ptlv)
    sexp = str(exp)
    sgold = str(gold)
    slv = str(lv)
    sav = character1 + '\n' + shp + '\n' + smana + '\n' + sataque + '\n' + sdefesa + '\n' + sptlv + '\n' + sexp + '\n' + sgold + '\n' + slv
    f = open('C:/Users/steferson/Desktop/AtividadesPython/save.txt','w')
    f.write(sav)


def menu():
    op=0
    while op !=5:
        print ' 1 - Inventario'
        print ' 2 = Cidade'
        print ' 3 = Combate'
        print ' 5 = Sair'
        op=input('Digite uma opcao ')
        if op==1:
            inventario()
        elif op==2:
            cidade()
        elif op==3:
            combate()
        #elif op==4:
            #historia()
        else:
            print ' Errrou'

vault=[]
character1=''
f = open('C:/Users/steferson/Desktop/AtividadesPython/save.txt','a')
f.close()
hp = 50
hpmax=hp
mana = 30
ataque = 10
defesa = 3
ptlv = 5
exp=0
gold=0
lv = 0
vault=0
savePrincipal()

import random
menu()
